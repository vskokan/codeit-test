(function(e){function t(t){for(var s,n,o=t[0],c=t[1],l=t[2],d=0,v=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&v.push(a[n][0]),a[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(v.length)v.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],s=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=r[0]))}return e}var s={},a={app:0},i=[];function n(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=s,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},2742:function(e,t,r){},"520e":function(e,t,r){},"56c9":function(e,t,r){"use strict";r("2742")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e.sessionIsActive||"Sign Up"!=e.currentForm?e._e():r("SignUp",{on:{switchForm:e.changeForm,login:e.fetchUserData}}),e.sessionIsActive||"Sign In"!=e.currentForm?e._e():r("SignIn",{on:{switchForm:e.changeForm,login:e.fetchUserData}}),e.sessionIsActive?r("UserPage",{attrs:{user:e.user},on:{logout:e.logout}}):e._e()],1)},i=[],n=r("1da1"),o=(r("96cf"),r("d3b7"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form"},[r("h1",[e._v("Create account")]),r("div",{staticClass:"form-body"},[r("div",{staticClass:"container"},[r("div",{staticClass:"input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.login,expression:"user.login"}],attrs:{type:"text",placeholder:"Login: a-z, 0-9, >=3"},domProps:{value:e.user.login},on:{input:function(t){t.target.composing||e.$set(e.user,"login",t.target.value)}}})]),e.errors.login.length>0?r("div",{staticClass:"error-message"},[e._v(" "+e._s(e.errors.login)+" ")]):e._e()]),r("div",{staticClass:"container"},[r("div",{staticClass:"input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),e.errors.email.length>0?r("div",{staticClass:"error-message"},[e._v(" "+e._s(e.errors.email)+" ")]):e._e()]),r("div",{staticClass:"container"},[r("div",{staticClass:"input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"Password: >=5, must use A-Z, a-z and 0-9"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),e.errors.password.length>0?r("div",{staticClass:"error-message"},[e._v(" "+e._s(e.errors.password)+" ")]):e._e()]),r("div",{staticClass:"container"},[r("div",{staticClass:"input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.confirmedPassword,expression:"user.confirmedPassword"}],attrs:{type:"password",placeholder:"Confirm your password"},domProps:{value:e.user.confirmedPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"confirmedPassword",t.target.value)}}})]),e.errors.passwordConfirmation.length>0?r("div",{staticClass:"error-message"},[e._v(" "+e._s(e.errors.passwordConfirmation)+" ")]):e._e()]),r("div",{staticClass:"container"},[r("div",{staticClass:"input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.realName,expression:"user.realName"}],attrs:{type:"text",placeholder:"Real name"},domProps:{value:e.user.realName},on:{input:function(t){t.target.composing||e.$set(e.user,"realName",t.target.value)}}})]),e.errors.realName.length>0?r("div",{staticClass:"error-message"},[e._v(" "+e._s(e.errors.realName)+" ")]):e._e()]),r("div",{staticClass:"container"},[r("div",{staticClass:"input birth-date"},[r("label",[e._v(" Birth date ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.birthDate,expression:"user.birthDate"}],staticClass:"date",attrs:{type:"date"},domProps:{value:e.user.birthDate},on:{input:function(t){t.target.composing||e.$set(e.user,"birthDate",t.target.value)}}})]),e.errors.birthDate.length>0?r("div",{staticClass:"error-message"},[e._v(" "+e._s(e.errors.birthDate)+" ")]):e._e()]),r("div",{staticClass:"container"},[r("div",{staticClass:"input country-list"},[r("label",[e._v(" Country ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.user.country,expression:"user.country"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.user,"country",t.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",value:""}},[e._v("Choose country")]),e._l(e.countries,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)]),e.errors.country.length>0?r("div",{staticClass:"error-message"},[e._v(" "+e._s(e.errors.country)+" ")]):e._e()]),r("div",{staticClass:"container agreement",on:{click:function(t){e.agreement=!e.agreement}}},[r("div",{staticClass:"input agreement"},[r("div",{staticClass:"checkbox"},[r("i",{class:{"fas fa-check":e.agreement}})]),r("label",{staticClass:"agreement"},[e._v("I agree with terms and conditions")])]),e.errors.agreement.length>0?r("div",{staticClass:"error-message"},[e._v(" Agree to continue ")]):e._e()])]),r("button",{on:{click:e.validateAll}},[e._v(" Sign Up ")]),r("div",{staticClass:"link-to-form",on:{click:e.switchForm}},[e._v("I already have an account")]),r("div",{directives:[{name:"show",rawName:"v-show",value:this.errors.signup.length>0,expression:"this.errors.signup.length > 0"}],staticClass:"signup-error"},[e._v(" Error! Try again ")])])}),c=[],l=(r("4d63"),r("ac1f"),r("25f0"),r("466d"),{data:function(){return{user:{login:"",email:"",password:"",confirmedPassword:"",realName:"",birthDate:"",country:""},agreement:!1,valid:!0,errors:{login:"",email:"",password:"",passwordConfirmation:"",realName:"",birthDate:"",country:"",agreement:"",signup:""},showMessages:!1,countries:[],countriesAreLoaded:!1}},methods:{validateAll:function(){this.valid=!0,this.validateLogin(),this.validateEmail(),this.validatePassword(),this.validateRealName(),this.validateBirthDate(),this.validateCountry(),this.checkAgreement(),this.valid?this.sendUserData():(this.user.password="",this.user.confirmedPassword="")},validateLogin:function(){if(this.errors.login="",""===this.user.login)this.errors.login="Requied field",this.valid=!1;else{this.checkUserLoginExistence();var e=new RegExp("^[a-z0-9]{3,15}$");null==this.user.login.match(e)&&(this.errors.login="Incorrect format",this.valid=!1)}},validateEmail:function(){if(this.errors.email="",""===this.user.email)this.errors.email="Requied field",this.valid=!1;else{this.checkUserEmailExistence();var e=new RegExp("[^@ \\t\\r\\n]+@[^@ \\t\\r\\n]+\\.[^@ \\t\\r\\n]+");null==this.user.email.match(e)&&(this.errors.email="Incorrect format",this.valid=!1)}},validatePassword:function(){if(this.errors.password="",this.errors.passwordConfirmation="",""===this.user.password)this.errors.password="Requied field",this.valid=!1;else{var e=new RegExp("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{5,}$");null==this.user.password.match(e)&&(this.errors.password="Weak password",this.valid=!1)}this.user.password!==this.user.confirmedPassword&&(this.errors.passwordConfirmation="Passwords dont match",this.valid=!1)},validateRealName:function(){this.errors.realName="",""===this.user.realName&&(this.errors.realName="Requied field",this.valid=!1)},validateBirthDate:function(){this.errors.birthDate="",""===this.user.birthDate&&(this.errors.birthDate="Requied field",this.valid=!1)},validateCountry:function(){this.errors.country="",""===this.user.country&&(this.errors.country="Requied field",this.valid=!1)},checkAgreement:function(){this.errors.agreement="",this.agreement||(this.errors.agreement="Agree to countinue",this.valid=!1)},switchForm:function(){this.$emit("switchForm","Sign In")},fetchCountries:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/countries");case 2:if(r=t.sent,!r.ok){t.next=9;break}return t.next=6,r.json();case 6:e.countries=t.sent,t.next=10;break;case 9:alert("HTTP error: "+r.status);case 10:case"end":return t.stop()}}),t)})))()},checkUserLoginExistence:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/users/".concat(e.user.login,"/check"));case 2:if(r=t.sent,!r.ok){t.next=10;break}return t.next=6,r.json();case 6:s=t.sent,s.exist&&(e.errors.login="Login already exists"),t.next=11;break;case 10:alert("HTTP error"+r.status);case 11:case"end":return t.stop()}}),t)})))()},checkUserEmailExistence:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/users/email/check",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:e.user.email})});case 2:if(r=t.sent,!r.ok){t.next=10;break}return t.next=6,r.json();case 6:s=t.sent,s.exist&&(e.errors.email="Email already exists"),t.next=11;break;case 10:alert("HTTP error"+r.status);case 11:case"end":return t.stop()}}),t)})))()},sendUserData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/users",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({user:e.user})});case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,s.login?e.$emit("login",e.user.login):e.errors.signup="Something went wrong. Try again...";case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchCountries()}}),u=l,d=(r("56c9"),r("2877")),v=Object(d["a"])(u,o,c,!1,null,null,null),m=v.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form"},[r("h1",[e._v("Sign In")]),r("div",[r("div",{staticClass:"input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.loginOrEmail,expression:"user.loginOrEmail"}],attrs:{type:"text",placeholder:"Login or email"},domProps:{value:e.user.loginOrEmail},on:{input:function(t){t.target.composing||e.$set(e.user,"loginOrEmail",t.target.value)}}})]),r("div",{staticClass:"input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),r("div",{staticClass:"errors"}),r("button",{on:{click:e.login}},[e._v("Sign In")]),r("div",{staticClass:"link-to-form",on:{click:e.switchForm}},[e._v("Create new account")]),r("div",[e._v(e._s(this.error))])])])},p=[],g={data:function(){return{user:{loginOrEmail:"",password:""},error:""}},methods:{switchForm:function(){this.$emit("switchForm","Sign Up")},login:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:3000/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({user:e.user})});case 2:if(r=t.sent,!r.ok){t.next=10;break}return t.next=6,r.json();case 6:s=t.sent,s.logged?e.$emit("login",s.login):e.error=s.message,t.next=11;break;case 10:alert("HTTP error"+r.status);case 11:case"end":return t.stop()}}),t)})))()}}},f=g,w=Object(d["a"])(f,h,p,!1,null,null,null),_=w.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile"},[r("div",{staticClass:"header"},[e._v("About "+e._s(e.user.login))]),r("div",{staticClass:"container"},[r("div",{staticClass:"field"},[e._v("Email:")]),r("div",{staticClass:"value"},[e._v(e._s(e.user.email))])]),r("div",{staticClass:"container"},[r("div",{staticClass:"field"},[e._v("Real name:")]),r("div",{staticClass:"value"},[e._v(e._s(e.user.realName))])]),r("div",{staticClass:"container"},[r("div",{staticClass:"field"},[e._v("Birth Date:")]),r("div",{staticClass:"value"},[e._v(e._s(e.user.birthDate))])]),r("div",{staticClass:"container"},[r("div",{staticClass:"field"},[e._v("Registration Date:")]),r("div",{staticClass:"value"},[e._v(e._s(e.dateFormat(e.user.registrationDate)))])]),r("div",{staticClass:"container"},[r("div",{staticClass:"field"},[e._v("Country:")]),r("div",{staticClass:"value"},[e._v(e._s(e.user.country))])]),r("button",{on:{click:e.logout}},[e._v("Sign Out")])])},C=[],y=(r("99af"),{props:["user"],watch:{user:function(e){return e}},methods:{logout:function(){this.$emit("logout",this.user)},dateFormat:function(e){var t=new Date(e),r=["January","February","March","April","May","June","July","August","September","November","October","November","December"];return"".concat(t.getDate()," ").concat(r[t.getMonth()]," ").concat(t.getFullYear())}}}),x=y,k=(r("e8c3"),Object(d["a"])(x,b,C,!1,null,null,null)),P=k.exports,O={name:"App",components:{SignUp:m,SignIn:_,UserPage:P},data:function(){return{sessionIsActive:!1,currentForm:"Sign In",login:localStorage.getItem("login"),user:{}}},methods:{changeForm:function(e){this.currentForm=e},fetchUserData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("/users/"+e);case 2:if(s=r.sent,!s.ok){r.next=11;break}return r.next=6,s.json();case 6:t.user=r.sent,localStorage.setItem("login",e),t.sessionIsActive=!0,r.next=12;break;case 11:alert("HTTP error: "+s.status);case 12:case"end":return r.stop()}}),r)})))()},logout:function(){localStorage.removeItem("login"),this.sessionIsActive=!1,this.currentForm="Sign In"}},created:function(){localStorage.getItem("login")&&(this.sessionIsActive=!0,this.fetchUserData(this.login))}},S=O,N=(r("034f"),Object(d["a"])(S,a,i,!1,null,null,null)),j=N.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(j)}}).$mount("#app")},"85ec":function(e,t,r){},e8c3:function(e,t,r){"use strict";r("520e")}});
//# sourceMappingURL=app.26a8632f.js.map